---
title: 'ETC5513: Collaborative and Reproducible Practices'
subtitle: "Workshop 6"
author: "Michael Lydeamore"
date: today
format:
    unilur-html: 
        embed-resources: true
        output-file: "index.html"
        toc: true
---

```{r, echo = FALSE, eval = file.exists("tutorial.css")}
htmltools::includeCSS("tutorial.css")
```


# ğŸ”„ Git Undo Workshop: `git revert` and `git reset`

Mistakes happen â€” thatâ€™s why Git gives us powerful tools to undo changes. In this workshop, youâ€™ll learn two of the most useful commands for fixing things:

- `git revert`: Undo a **commit** by creating a new commit that cancels it out
- `git reset`: Move your branch pointer to a previous commit (âš ï¸ this can rewrite history!)

---

## ğŸ› ï¸ What Youâ€™ll Learn

- The difference between `revert` and `reset`
- How to safely undo changes
- When to use which command

---

## ğŸ§‘â€ğŸ’» 1. Create a New Repository on GitHub

1. Go to [https://github.com](https://github.com) and log in  
2. Click **+ â†’ New repository**  
3. Name it something like `git-undo-demo`  
4. âœ… Check **Add a README file**  
5. Click **Create repository**  
6. Click the green **Code** button â†’ Select **SSH** â†’ Copy the URL

---

### ğŸ’» 2. Clone the Repository Locally

Open your terminal and run:

```bash
git clone git@github.com:your-username/git-undo-demo.git
cd git-undo-demo
```

---

### âœï¸ 3. Add Content to the README

Weâ€™ll simulate a few commits by editing the `README.md` file.

1. Open `README.md` in RStudio or your preferred text editor  
2. Add a line at the bottom like:

```markdown
Line 1: Initial test message
```

3. Save the file, then run:

```bash
git add README.md
git commit -m "Add line 1"
```

4. Repeat the process three more times, adding different lines like:

```markdown
Line 2: More changes
Line 3: Experimental note
Line 4: Oops! Maybe not needed
```

Each time, save the file, then:

```bash
git add README.md
git commit -m "Add line X"
```

âœ… You should now have 4 commits, each adding a line to `README.md`.

Check your commit history:

```bash
git log --oneline
```

---

## ğŸ§ª Part 1: `git revert` (Safe Undo)

Letâ€™s say you want to undo the "Add line 3" commit â€” but **without changing the history**.

1. Find the commit hash:

```bash
git log --oneline
```

Copy the hash for "Add line 3", then:

```bash
git revert <hash>
```

Git will create a **new commit** that undoes the changes from that commit.

âœ… This is a **safe** way to undo changes â€” especially useful on shared branches like `main`.

---

## ğŸ§ª Part 2: `git reset` (Rewriting History)

Now letâ€™s try using `reset` to go back in time.

---

### âš ï¸ Warning

`reset` actually moves your branch pointer and can **remove commits** â€” so itâ€™s best used on branches that only you are working on (like `feature` branches).

---

### ğŸ§¹ 1. Soft Reset

This keeps your changes, but undoes the last commit:

```bash
git reset --soft HEAD~1
```

You can now edit or recommit with a new message.

---

### ğŸ§¼ 2. Mixed Reset (default)

This keeps the file changes but **unstages** them:

```bash
git reset HEAD~1
```

Run `git status` to see your changes â€” theyâ€™re back in the working directory.

---

### ğŸ”¥ 3. Hard Reset (Be Careful!)

This **discards** the last commit *and* any changes:

```bash
git reset --hard HEAD~1
```

âœ… Your repo is now rolled back one commit â€” as if it never happened.

---

## ğŸ’¡ Summary: When to Use What

| Command         | Does What?                                | Safe for Shared Branches? |
|----------------|--------------------------------------------|----------------------------|
| `git revert`    | Creates a new commit to undo a change      | âœ… Yes                     |
| `git reset --soft`  | Moves HEAD, keeps changes staged        | âš ï¸ Not recommended         |
| `git reset`     | Moves HEAD, keeps changes unstaged         | âš ï¸ Not recommended         |
| `git reset --hard` | DANGEROUS: Deletes changes + commits    | âŒ Never on shared branches |

---

# ğŸ“¦ Using `git stash`

Sometimes you make changes in your working directory, but you're not ready to commit them â€” and you need to switch branches or pull updates. `git stash` lets you save your changes temporarily without committing.

---

## ğŸ› ï¸ Goal

Learn how to:
- Save changes using `git stash`
- Switch branches safely
- Reapply your stashed work

---

## ğŸ§ª Step-by-Step Instructions

1. Make sure you're inside a Git-tracked project (any project will do).

2. Open a file and make **some changes** â€” but **donâ€™t commit** yet.

3. Check your Git status:

```bash
git status
```

You should see the file listed as modified.

---

### ğŸ“¦ 1. Stash Your Changes

Run:

```bash
git stash
```

âœ… This saves your changes and returns your working directory to a clean state.

---

### ğŸ”„ 2. Switch Branches (or Pull)

Now try switching to another branch:

```bash
git checkout main
```

Or do a pull:

```bash
git pull
```

âœ… Your working directory stays clean â€” no conflicts!

---

### â™»ï¸ 3. Reapply the Stash

When you're ready to bring back your changes:

```bash
git stash apply
```

âœ… Your edits will be restored to the files you changed.

---

### ğŸ—‘ï¸ 4. (Optional) Clear the Stash

After applying, you can remove the stash:

```bash
git stash drop
```

Or, to both apply *and* drop in one step:

```bash
git stash pop
```

---

ğŸ‰ Youâ€™ve learned how to pause your work safely and come back to it later!
